function initialize(){navigator.geolocation.getCurrentPosition(function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c={mapTypeId:google.maps.MapTypeId.ROADMAP,center:b,zoom:3};map=new google.maps.Map(document.getElementById("map-canvas"),c),directionsDisplay.setMap(map),google.maps.event.addListener(directionsDisplay,"directions_changed",function(){computeTotalDistance(directionsDisplay.directions)}),calcRoute(b)})}function calcRoute(a){console.log(a);var b={origin:a,destination:new google.maps.LatLng("9.388097","-83.641877"),travelMode:google.maps.DirectionsTravelMode.DRIVING};directionsService.route(b,function(a,b){b==google.maps.DirectionsStatus.OK&&(directionsDisplay.setDirections(a),map.setZoom(3))})}function computeTotalDistance(a){for(var b=0,c=a.routes[0],d=0;d<c.legs.length;d++)b+=c.legs[d].distance.value;b/=1e3,document.getElementById("total").innerHTML=b+" km"}var $html=$("html"),$container=$("#container"),$scene=$("#scene");!function(){setTimeout(function(){window.scrollTo(0,0)},0)}(),FastClick.attach(document.body),Hammer.HAS_TOUCHEVENTS&&($container.hammer({drag_lock_to_axis:!0}),_.tap($html,"a,button,[data-tap]")),$html.addClass(Hammer.HAS_TOUCHEVENTS?"touch":"mouse"),(resize=function(){$scene[0].style.width=window.innerWidth+"px",$scene[0].style.height=window.innerHeight+"px"})(),window.onresize=_.debounce(resize,200),window.onscroll=_.debounce(resize,200),$scene.parallax(),setTimeout(function(){"cursor"===$scene.data("mode")},1e3),jQuery(document).ready(function(){var a="183820786.467ede5.771880a32c584187b2e5dc16253a2139",b="183820786",c="https://api.instagram.com/v1/users/"+b+"/media/recent/?access_token="+a+"&count=14&callback=?",d="";jQuery.ajax({url:c,dataType:"jsonp",success:function(a){console.log(a);var b=_.map(a.data,function(a){var b={link:a.link,image:a.images.low_resolution.url,imageHigh:a.images.standard_resolution.url};return b});d=a.pagination.next_url;var c=2;_.forEach(b,function(a){b.indexOf(a)===c?(jQuery(".box").append('<div class="item"><img src='+a.imageHigh+' style="width:255.6px; height:255.6px; display:block; float:left;"></div>'),c+=6):jQuery(".box").append('<div class="item"><img src='+a.image+' style="width:127.8px; height:127.8px; display:block; float:left;"></div>')})},error:function(){alert("Error")}}),jQuery(".loadMore").click(function(){jQuery.ajax({url:d,dataType:"jsonp",success:function(a){console.log(a);var b=_.map(a.data,function(a){var b={link:a.link,image:a.images.low_resolution.url,imageHigh:a.images.standard_resolution.url};return b});d=a.pagination.next_url;var c=2;_.forEach(b,function(a){b.indexOf(a)===c?(jQuery(".box").append('<div class="item"><img src='+a.imageHigh+' style="width:255.6px; height:255.6px; display:block; float:left;"></div>'),c+=6):jQuery(".box").append('<div class="item"><img src='+a.image+' style="width:127.8px; height:127.8px; display:block; float:left;"></div>')})},error:function(){alert("Error")}}),setTimeout(function(){var a=jQuery(".box");console.log("masonry"),a.masonry("reloadItems"),a.masonry()},1e3)}),setTimeout(function(){var a=jQuery(".box");a.masonry({itemSelector:".item"})},2e3)});var rendererOptions={draggable:!0},directionsDisplay=new google.maps.DirectionsRenderer(rendererOptions),directionsService=new google.maps.DirectionsService,map,australia=new google.maps.LatLng(-25.274398,133.775136);google.maps.event.addDomListener(window,"load",initialize);